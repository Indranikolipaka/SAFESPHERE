<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>File Complaint - SafeSphere</title>
  <link rel="stylesheet" href="/static/css/common.css">
  <link rel="stylesheet" href="/static/css/student.css">
</head>
<body>
  <div class="container">
    <header><h2>File a Complaint</h2></header>
    <main class="card">
      <form action="/complaint/new" method="post" enctype="multipart/form-data">
        <div class="form-row">
          <label>Full Name</label>
          <input type="text" value="{{ student['name'] }}" readonly>
        </div>
        <div class="form-row">
          <label>Roll No / Hall Ticket</label>
          <input type="text" name="roll_no" value="{{ student['roll_no'] or '' }}">
        </div>
        <div class="form-row">
          <label>Category</label>
          <select name="category" id="category" onchange="checkOther(this)">
            <option>Harassment</option>
            <option>Bullying</option>
            <option>Verbal Abuse</option>
            <option value="other">Other</option>
          </select>
          <input type="text" name="other_category" id="otherCategory" placeholder="Enter your category" style="display:none; margin-top:5px;">
        </div>
        <div class="form-row">
          <label>Description</label>
          <textarea name="description" required></textarea>
        </div>
        <div class="form-row">
          <label>Attachment (optional)</label>
          <input type="file" name="attachment">
        </div>
        <div class="form-row">
          <label>Choose Mentor Teacher</label>
          <select name="mentor">
            {% for t in teachers %}<option value="{{ t['id'] }}">{{ t['name'] }}</option>{% endfor %}
          </select>
        </div>
        <div class="form-actions">
          <button class="btn primary" type="submit">Submit</button>
        </div>
      </form>
    </main>
  </div>

  <script>
    function checkOther(select) {
      const otherInput = document.getElementById('otherCategory');
      if (select.value === 'other') {
        otherInput.style.display = 'block'; // show text input
      } else {
        otherInput.style.display = 'none';  // hide text input
      }
    }
  </script>
</body>
</html>

